
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>JS Drum Kit</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>  <div class="keys">
    <div data-key="65" class="key" id="1">
      <kbd>A</kbd>
      <span class="sound">clap</span>
    </div>
    <div data-key="83" class="key" id="2">
      <kbd>S</kbd>
      <span class="sound">hihat</span>
    </div>
    <div data-key="68" class="key" id="3">
      <kbd>D</kbd>
      <span class="sound">kick</span>
    </div>
    <div data-key="70" class="key" id="4">
      <kbd>F</kbd>
      <span class="sound">openhat</span>
    </div>
    <div data-key="71" class="key" id="5">
      <kbd>G</kbd>
      <span class="sound">boom</span>
    </div>
    <div data-key="72" class="key" id="6">
      <kbd>H</kbd>
      <span class="sound">ride</span>
    </div>
    <div data-key="74" class="key" id="7">
      <kbd>J</kbd>
      <span class="sound">snare</span>
    </div>
    <div data-key="75" class="key" id="8">
      <kbd>K</kbd>
      <span class="sound">tom</span>
    </div>
    <div data-key="76" class="key" id="9">
      <kbd>L</kbd>
      <span class="sound">tink</span>
    </div>
  </div>  <audio data-key="65" src="sounds/clap.wav" id="a1"></audio>
  <audio data-key="83" src="sounds/hihat.wav" id="a2"></audio>
  <audio data-key="68" src="sounds/kick.wav" id="a3"></audio>
  <audio data-key="70" src="sounds/openhat.wav" id="a4"></audio>
  <audio data-key="71" src="sounds/boom.wav" id="a5"></audio>
  <audio data-key="72" src="sounds/ride.wav" id="a6"></audio>
  <audio data-key="74" src="sounds/snare.wav" id="a7"></audio>
  <audio data-key="75" src="sounds/tom.wav" id="a8"></audio>
  <audio data-key="76" src="sounds/tink.wav" id="a9"></audio>
  <script>

    let clicked1 = 0;
    let clicked2 = 0;
    let clicked3 = 0;
    let clicked4 = 0;
    let clicked5 = 0;
    let clicked6 = 0;
    let clicked7 = 0;
    let clicked8 = 0;
    let clicked9 = 0;

    let clap = document.getElementById('1');
    let hihat = document.getElementById("2");
    let kick = document.getElementById("3");
    let openhat = document.getElementById("4");
    let boom = document.getElementById("5");
    let ride = document.getElementById("6");
    let snare = document.getElementById("7");
    let tom = document.getElementById("8");
    let tink = document.getElementById("9");  
   const keys = Array.from(document.querySelectorAll('.key'));
   

    clap.addEventListener('click', function(){
       ++clicked1;
       if(clicked1 == 10){
        removeTransition(keys);
       }
      playAudio(clap.id);
    });
    hihat.addEventListener('click', function(){
      ++clicked2;
      if(clicked2 == 10){
        removeTransition(keys);
       }
      playAudio(hihat.id);
    });
    kick.addEventListener('click', function(){
      ++clicked3;
      if(clicked3 == 10){
        removeTransition(keys);
       }
      playAudio(kick.id);
    });
    openhat.addEventListener('click', function(){
      ++clicked4;
      if(clicked4 == 10){
        removeTransition(keys);
       }
      playAudio(openhat.id);
    });
    boom.addEventListener('click', function(){
      ++clicked5;
      if(clicked5 == 10){
        removeTransition(keys);
       }
      playAudio(boom.id);
    });
    ride.addEventListener('click', function(){
      ++clicked6;
      if(clicked6 == 10){
        removeTransition(keys);
       }
      playAudio(ride.id);
    });
    snare.addEventListener('click', function(){
      ++clicked7;
      if(clicked7 == 10){
        removeTransition(keys);
       }
      playAudio(snare.id);
    });
    tom.addEventListener('click', function(){
      ++clicked8;
      if(clicked8 == 10){
        removeTransition(keys);
       }
      playAudio(tom.id);
    });
    tink.addEventListener('click', function(){
      ++clicked9;
      if(clicked9 == 10){
        removeTransition(keys);
       }
      playAudio(tink.id);
    });    
    let a1 = document.getElementById("a1");
    let a2 = document.getElementById("a2");
    let a3 = document.getElementById("a3");
    let a4 = document.getElementById("a4");
    let a5 = document.getElementById("a5");
    let a6 = document.getElementById("a6");
    let a7 = document.getElementById("a7");
    let a8 = document.getElementById("a8");
    let a9 = document.getElementById("a9");    
    function playAudio(id){
      if(id == 1){
        if(a1.play()){
          a1.currentTime = 0;
          clap.classList.add("playing");
        }
      }
      else if(id == 2){
        if(a2.play()){
          a2.currentTime = 0;
          hihat.classList.add("playing");
        }
      }
      else if(id == 3){
        if(a3.play()){
          a3.currentTime = 0;
          kick.classList.add("playing");
        }
      }
      else if(id == 4){
        if(a4.play()){
          a4.currentTime = 0;
          openhat.classList.add("playing");
        }
      }
      else if(id == 5){
        if(a5.play()){
          a5.currentTime = 0;
          boom.classList.add("playing");
        }
      }
      else if(id == 6){
        if(a6.play()){
          a6.currentTime = 0;
          ride.classList.add("playing");
        }
      }
      else if(id == 7){
        if(a7.play()){
          a7.currentTime = 0;
          snare.classList.add("playing");
        }
      }
      else if(id == 8){
        if(a8.play()){
          a8.currentTime = 0;
          tom.classList.add("playing");
        }
      }
      else if(id == 9){
        if(a9.play()){
          a9.currentTime = 0;
          tink.classList.add("playing");
        }
      }
      else {      }

    //  console.log("CLICKED1: " + clicked1);
    //  console.log("CLICKED2: " + clicked2);
    //  console.log("CLICKED3: " + clicked3);
    //  console.log("CLICKED4: " + clicked4);
  
      moveDown(id);

      setTimeout(function(){
        document.getElementById(id).classList.remove('playing');
      }, 1000)
    }
    
  

  function removeTransition(id) {
    keys.forEach(function(key){
      console.log("KEY: " + key.id);
      document.getElementById(key.id).style.transform += "translateY(-100px)"
      // key.property.transitioned = none;
      // if (key.propertyName == 'transform'){
      //   return;
      // }else{
      //   console.log("ELSE KEY: " + key);
      //   key.addEventListener('transitionend', removeTransition)
      // }
      // key.target.classList.remove('playing');
    })
    

  }  

  function moveDown(id){
    document.getElementById(id).style.transform += "translateY(10px)";
  }


</script>
</body>
</html>
